<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 300">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#6c757d"/>
    </marker>
    <pattern id="grid2D" width="20" height="20" patternUnits="userSpaceOnUse">
      <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#e0e0e0" stroke-width="1"/>
    </pattern>
  </defs>

  <text x="300" y="30" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#212529" text-anchor="middle">Case 3: m = n (Square Matrix)</text>
  <text x="300" y="50" font-family="Arial, sans-serif" font-size="12" fill="#6c757d" text-anchor="middle">R² ➔ R² (Can be both Onto and 1-to-1)</text>

  <!-- Domain R2 -->
  <g transform="translate(50, 80)">
    <text x="50" y="-10" font-family="Arial, sans-serif" font-size="12" fill="#1976d2" font-weight="bold" text-anchor="middle">Domain R²</text>
    <rect x="0" y="0" width="100" height="100" fill="#e3f2fd" stroke="#1976d2" rx="4"/>
    <rect x="0" y="0" width="100" height="100" fill="url(#grid2D)"/>
    
    <circle cx="30" cy="30" r="4" fill="#1565c0"/>
    <text x="30" y="20" font-family="Arial, sans-serif" font-size="10" fill="#1565c0">u</text>
    
    <circle cx="70" cy="70" r="4" fill="#1565c0"/>
    <text x="70" y="60" font-family="Arial, sans-serif" font-size="10" fill="#1565c0">v</text>
  </g>

  <!-- Arrow -->
  <g transform="translate(180, 130)">
    <path d="M 0,0 L 60,0" stroke="#6c757d" stroke-width="2" marker-end="url(#arrow)"/>
    <text x="30" y="-10" font-family="Arial, sans-serif" font-size="12" fill="#6c757d" text-anchor="middle">T</text>
  </g>

  <!-- Codomain R2 -->
  <g transform="translate(300, 80)">
    <text x="80" y="-10" font-family="Arial, sans-serif" font-size="12" fill="#2e7d32" font-weight="bold" text-anchor="middle">Codomain R²</text>
    
    <!-- Transformed Grid (Rotation + Scaling) -->
    <path d="M 0,50 L 80,0 L 160,50 L 80,100 Z" fill="#e8f5e9" stroke="#2e7d32" stroke-width="1.5"/>
    <line x1="40" y1="25" x2="120" y2="75" stroke="#a5d6a7" stroke-width="1"/>
    <line x1="40" y1="75" x2="120" y2="25" stroke="#a5d6a7" stroke-width="1"/>
    
    <!-- Mapped points -->
    <circle cx="40" cy="25" r="4" fill="#2e7d32"/>
    <text x="35" y="15" font-family="Arial, sans-serif" font-size="10" fill="#2e7d32">T(u)</text>
    
    <circle cx="120" cy="75" r="4" fill="#2e7d32"/>
    <text x="125" y="85" font-family="Arial, sans-serif" font-size="10" fill="#2e7d32">T(v)</text>
    
    <text x="80" y="130" font-family="Arial, sans-serif" font-size="9" fill="#1b5e20" text-anchor="middle" font-style="italic">Perfect match! No collapse, full coverage.</text>
  </g>

  <!-- Info Box -->
  <g transform="translate(150, 240)">
     <rect x="0" y="0" width="300" height="40" rx="5" fill="#e8f5e9" stroke="#a5d6a7"/>
     <text x="150" y="25" font-family="Arial, sans-serif" font-size="11" fill="#2e7d32" text-anchor="middle">Rank(A) = 2 = n = m. Invertible.</text>
  </g>
</svg>
